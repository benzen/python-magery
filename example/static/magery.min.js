var Magery=function(t){var e={};function r(n){if(e[n])return e[n].exports;var a=e[n]={exports:{},id:n,loaded:false};t[n].call(a.exports,a,a.exports,r);a.loaded=true;return a.exports}r.m=t;r.c=e;r.p="";return r(0)}([function(t,e,r){t.exports={compileTemplates:r(1),Template:r(5),BoundTemplate:r(6)}},function(t,e,r){var n=r(2);var a=r(3);var i=r(4);var u=r(5);function s(t){var e=t.filter(function(t){return t});var r=e.length;return function(t,n,a,i){var u=-1;while(++u<r){e[u](t,n,a,i)}}}function o(t){if(t.text_buffer){t.patcher.text(t.text_buffer);t.text_buffer=""}}function f(t,e){var r=t.split(/{{|}}/);var n=r.length;var i=-1;while(++i<n){if(i%2){var u=a.propertyPath(a.trim(r[i]));r[i]=u}}if(n==1&&!r[0]&&e){return function(){return true}}else if(n==3&&!r[0]&&!r[2]){return function(t){return a.lookup(t,r[1])}}return function(t){var e="";var i=-1;while(++i<n){e+=i%2?a.lookup(t,r[i]):r[i]}return e}}function l(t){var e=t.textContent;var r=f(e);return function(t,e,n,a){t.text_buffer+=r(e)}}function c(t,e){var r=g(t,e);var i=null;if(e.dataset.key){i=f(e.dataset.key)}var s={};var l={};for(var c=0,h=e.attributes.length;c<h;c++){var m=e.attributes[c];var y=m.name;if(y=="data-each"||y=="data-if"||y=="data-unless"||y=="data-key"){continue}if(y=="data-template"){l["data-bind"]=f(m.value,false);continue}var b=y.match(/^on(.*)/,b);if(b){var P=b[1];s[P]=m.value}else{l[y]=f(m.value,n.attributes[y]&n.BOOLEAN_ATTRIBUTE)}}var k=e.tagName.toLowerCase();var x=function(u,f,c,h){if(t[k]){var v={};var p={};for(var d in l){var m=l[d](f);var g=a.propertyPath(m);v[d]=a.lookup(f,g);p[d]=a.lookup(c,g)}t[k].render(u,v,p,function(){r(u,f,c,h)});return}var y=i?i(f):null;o(u);u.patcher.enterTag(e.tagName,y);for(var d in l){var m=l[d](f);if(m||!(n.attributes[d]&n.BOOLEAN_ATTRIBUTE)){u.patcher.attribute(d,m)}}for(var b in s){u.patcher.eventListener(b,s[b],f,u)}r(u,f,c,h);o(u);u.patcher.exitTag()};if(e.dataset.template){var N=e.dataset.template;if(t[N]){throw new Error("Template '"+N+"' already exists")}t[N]=new u(N,x)}else{if(e.dataset.unless){x=v(e,x)}if(e.dataset.if){x=p(e,x)}if(e.dataset.each){x=d(e,x)}}return x}function h(t){if(Array.isArray(t)){return t.length>0}return t}function v(t,e){var r=a.propertyPath(t.dataset.unless);return function(t,n,i,u){if(!h(a.lookup(n,r))){e(t,n,i,u)}}}function p(t,e){var r=a.propertyPath(t.dataset.if);return function(t,n,i,u){if(h(a.lookup(n,r))){e(t,n,i,u)}}}function d(t,e){var r=t.dataset.each.split(" in ");var n=r[0];var i=a.propertyPath(r[1]);return function(t,r,u,s){var o=a.lookup(r,i);var f=a.lookup(u,i);var l=o.length;var c=-1;while(++c<l){var h=a.shallowClone(r);var v=a.shallowClone(u);h[n]=o[c];v[n]=f&&f[c];e(t,h,v,s)}}}function m(t,e){if(a.isTextNode(e)){return l(e)}else if(a.isElementNode(e)){if(e.tagName==="TEMPLATE-CHILDREN"){return function(t,e,r,n){n&&n()}}return c(t,e)}return null}function g(t,e){return s(a.mapNodes(e.childNodes,m.bind(null,t)))}t.exports=function(e,r){r=r||{};e=e||".magery-templates";if(typeof e==="string"){e=document.querySelectorAll(e)}if(e instanceof NodeList){for(var n=0,u=e.length;n<u;n++){t.exports(e[n],r)}}else{if(e.tagName==="TEMPLATE"&&e.content){e=e.content}i.markPaths(e);a.eachNode(e.childNodes,m.bind(null,r))}return r}},function(t,e){var r=e.BOOLEAN_ATTRIBUTE=1;var n=e.USE_PROPERTY=2;e.attributes={allowfullscreen:r,async:r,autofocus:r,autoplay:r,capture:r,checked:r|n,controls:r,default:r,defer:r,disabled:r,formnovalidate:r,hidden:r,itemscope:r,loop:r,multiple:r|n,muted:r|n,novalidate:r,open:r,readonly:r,required:r,reversed:r,selected:r|n,value:n}},function(t,e){var r=1;var n=3;var a=11;e.isDocumentFragment=function(t){return t.nodeType===a};e.isElementNode=function(t){return t.nodeType===r};e.isTextNode=function(t){return t.nodeType===n};e.eachNode=function(t,e){var r=0;var n=t[0];while(n){var a=n;n=n.nextSibling;e(a,r++,t)}};e.mapNodes=function(t,r){var n=[];e.eachNode(t,function(e,a){n[a]=r(e,a,t)});return n};e.trim=function(t){return t.replace(/^\s+|\s+$/g,"")};e.propertyPath=function(t){return t.split(".").filter(function(t){return t})};e.lookup=function(t,e){var r=t;for(var n=0,a=e.length;n<a;n++){if(r===undefined||r===null){return""}r=r[e[n]]}return r===undefined||r===null?"":r};e.templateTagName=function(t){var e=/^TEMPLATE-([^\s/>]+)/.exec(t.tagName);return e&&e[1].toLowerCase()};e.shallowClone=function(t){return Object.assign({},t)}},function(t,e,r){var n=r(3);e.markPath=function(t,e){switch(e.length){case 0:return;case 1:t[e[0]]=true;return;default:for(var r=0,n=e.length-2;r<n;r++){var a=e[r];if(t[a]===true){return}if(t[a]===undefined){t[a]={}}t=t[a]}if(t[e[r]]){t[e[r]]=true}else{var i={};i[e[r+1]]=true;t[e[r]]=i}}};e.mergePaths=function(t,r){for(var n in r){if(t[n]===true){continue}else if(r[n]===true){t[n]=true}else if(!t[n]){t[n]=r[n]}else{if(Object.keys(t[n])[0]==Object.keys(r[n])[0]){e.mergePaths(t[n],r[n])}else{t[n]=true}}}};e.equivalentPathObjects=function(t,r){var n=Object.keys(t);var a=Object.keys(r);if(n.length!==a.length){return false}n.sort();a.sort();for(var i=n.length-1;i>=0;i--){if(n[i]!==a[i]){return false}}for(i=n.length-1;i>=0;i--){var u=n[i];var s=t[u];var o=r[u];if(s===true&&o===true){continue}else if(s===true||o===true){return false}else if(!e.equivalentPathObjects(t[u],r[u])){return false}}return true};e.stringPaths=function(t){var r={};var a=t.match(/{{\s*([^}]+?)\s*}}/g);if(a){a.forEach(function(t){e.markPath(r,n.propertyPath(t.replace(/^{{\s*|\s*}}$/g,"")))})}return r};function a(t,r){var a=false;var i=n.mapNodes(r.childNodes,o);for(var u=0,s=i.length;u<s;u++){var f=i[u];if(!f){a=true;break}e.mergePaths(t,f)}n.eachNode(r.childNodes,function(r,n){var u=i[n];if(u&&Object.keys(u).length===0){r.static=true}else if(a||!e.equivalentPathObjects(u,t)){r.active_paths=u}});return a?false:t}e.elementPaths=function(t){var r={};var i=null;var u;if(t.attributes){for(var s=0,o=t.attributes.length;s<o;s++){var f=t.attributes[s];if(f.name=="data-each"){var l=f.value.split(" in ");if(l.length<2){throw new Error("Badly formed data-each attribute value: "+f.value)}u=n.propertyPath(l[1]);e.markPath(r,u);i=l[0]}if(f.name=="data-if"){u=n.propertyPath(f.value);e.markPath(r,u)}else if(f.name=="data-unless"){u=n.propertyPath(f.value);e.markPath(r,u)}else{e.mergePaths(r,e.stringPaths(f.value))}}}r=a(r,t);if(i){delete r[i]}return r};function i(t){var r={};for(var i=0,u=t.attributes.length;i<u;i++){var s=t.attributes[i];if(s.name==="template"){e.mergePaths(r,e.stringPaths(s.value))}else{e.markPath(r,n.propertyPath(s.value))}}r=a(r,t);return r}function u(t){return false}var s={call:i,children:u};function o(t){if(n.isTextNode(t)){return e.stringPaths(t.textContent)}else{var r=n.templateTagName(t);if(r){var a=s[r];if(!a){throw new Error("Unknown template tag: "+t.tagName)}return a(t)}else if(n.isElementNode(t)||n.isDocumentFragment(t)){return e.elementPaths(t)}}return false}e.markPaths=function(t){n.eachNode(t.childNodes,function(t){t.active_paths=o(t);t.static=t.active_paths&&Object.keys(t.active_paths).length===0})}},function(t,e,r){var n=r(6);var a=r(7);var i=r(3);function u(t,e){this.render=e;this.name=t}u.prototype.bindPatcher=function(t,e,r){var a=new n(this,t,e,r);a.update();return a};u.prototype.bind=function(t,e,r){if(typeof t==="string"){t=document.getElementById(t)}return this.bindPatcher(new a.Patcher(t),e,r)};u.prototype.bindAll=function(t){var e=this;var r=document.querySelectorAll('[data-bind="'+this.name+'"]');return Array.prototype.map.call(r,function(r){var n=JSON.parse(r.getAttribute("data-context"));return e.bind(r,n,t)})};t.exports=u},function(t,e,r){var n=r(7);function a(t,e,r,n){this.handlers=n;this.data=r;this.patcher=e;this.template=t;this.text_buffer="";this.update_queued=false}a.prototype.update=function(){this.patcher.reset();this.template.render(this,this.data,null);this.update_queued=false};a.prototype.trigger=function(t){var e=Array.prototype.slice.call(arguments,1);return this.applyHandler(t,e)};a.prototype.applyHandler=function(t,e){var r=this.update_queued;this.update_queued=true;this.handlers[t].apply(this,e);if(!r){this.update()}};t.exports=a},function(t,e,r){var n=r(8);var a=r(3);var i=r(9);var u=1;var s=3;function o(t,e,r){return(t.tagName===e||t.nodeType===s&&e==="#text")&&t.key==r}function f(t,e,r,n){if(e&&o(e,r,n)){return e}if(n&&t.keymap){return t.keymap[n]||null}return null}function l(t,e,r){while(r){var n=r;r=r.nextSibling;t.removeChild(e,n)}}function c(t,e){var r=e.attributes;var n=[];var a,i;for(a=0,i=r.length;a<i;a++){var u=r[a];if(!e.visited_attributes.has(u.name)){n.push(u.name)}}for(a=0,i=n.length;a<i;a++){t.removeAttribute(e,n[a]);if(n[a]==="value"){t.removeEventListener(e,"input",b)}}}function h(t,e){if(!e.handlers){return}for(var r in e.handlers){if(!e.visited_events.has(r)){t.removeEventListener(e,r,e.handlers[r]);delete e.handlers[r]}}}function v(t,e){this.transforms=e||n;this.root=t;this.reset()}e.Patcher=v;v.prototype.reset=function(){this.parent=this.root.parentNode;this.current=this.root};v.prototype.stepInto=function(t){t.visited_attributes=new i;t.visited_events=new i;this.parent=t;this.current=t.firstChild};v.prototype.enterTag=function(t,e){var r=f(this.parent,this.current,t,e);if(!r){r=this.transforms.insertElement(this.parent,this.current,t);if(e){if(!this.parent.keymap){this.parent.keymap={}}this.parent.keymap[e]=r;r.key=e}}else if(!this.current){this.transforms.appendChild(this.parent,r)}else if(r!==this.current){this.transforms.replaceChild(this.parent,r,this.current)}this.stepInto(r)};function p(t){return function(e){var r=e.target;var n=r.handlers[t];if(n.name){var i=n.args.map(function(t){if(t.length==1&&t[0]=="event"){return e}return a.lookup(r.data,t)});r.bound_template.applyHandler(n.name,i)}if(r.tagName==="INPUT"){var u=r.getAttribute("type");if(t=="change"){if(u==="checkbox"){m(e)}else if(u==="radio"){g(e)}}else if(t=="input"&&r.hasAttribute("value")){b(e)}}else if(r.tagName==="SELECT"){y(e)}}}function d(t,e){if(!t.handlers){t.handlers={}}if(!t.handlers.hasOwnProperty(e)){var r=p(e);t.handlers[e]={fn:r};t.addEventListener(e,r)}}v.prototype.eventListener=function(t,e,r,n){var i=this.parent;if(i.data!==r){i.data=r}if(i.bound_template!==n){i.bound_template=n}d(i,t);var u=i.handlers[t];if(u.value!==e){u.value=e;var s=e.indexOf("(");var o=e.lastIndexOf(")");u.name=e.substring(0,s);var f=e.substring(s+1,o).split(",");u.args=f.map(function(t){return a.propertyPath(a.trim(t))})}i.visited_events.add(t)};function m(t){var e=t.target;if(e.dataset["managed"]==="true"){e.checked=e.hasAttribute("checked")}}function g(t){var e=t.target;if(e.dataset["managed"]==="true"){var r=e.hasAttribute("checked");if(e.checked!=r){if(e.name){var n=document.getElementsByName(e.name);for(var a=0,i=n.length;a<i;a++){var u=n[a];u.checked=u.hasAttribute("checked")}}else{e.checked=r}}}}function y(t){var e=t.target;if(e.dataset["managed"]==="true"){var r=e.getElementsByTagName("option");for(var n=0,a=r.length;n<a;n++){var i=r[n];i.selected=i.hasAttribute("selected")}}}function b(t){var e=t.target;if(e.dataset["managed"]==="true"){var r=e.getAttribute("value");if(e.value!==r){e.value=r}}}v.prototype.attribute=function(t,e){var r=this.parent;if(r.getAttribute(t)!==e){this.transforms.setAttribute(r,t,e)}r.visited_attributes.add(t)};v.prototype.text=function(t){var e=f(this.parent,this.current,"#text",null);if(!e){e=this.transforms.insertTextNode(this.parent,this.current,t)}else if(e.textContent!==t){this.transforms.replaceText(e,t)}this.current=e.nextSibling};function P(t,e){return t.handlers&&t.handlers[e]&&t.handlers[e].fn}v.prototype.exitTag=function(){l(this.transforms,this.parent,this.current);var t=this.parent;this.parent=t.parentNode;this.current=t.nextSibling;c(this.transforms,t);h(this.transforms,t);if(t.tagName==="INPUT"){var e=t.getAttribute("type");if((e==="checkbox"||e=="radio")&&!P(t,"change")){d(t,"change")}else if(t.hasAttribute("value")&&!P(t,"input")){d(t,"input")}}else if(t.tagName==="SELECT"){d(t,"change")}};v.prototype.skip=function(t,e){var r=f(this.parent,this.current,t,e);if(!this.current){this.transforms.appendChild(this.parent,r)}else if(r!==this.current){this.transforms.replaceChild(this.parent,r,this.current)}this.current=r.nextSibling}},function(t,e,r){var n=r(2);e.insertTextNode=function(t,e,r){var n=document.createTextNode(r);t.insertBefore(n,e);return n};e.replaceText=function(t,e){t.textContent=e;return t};e.replaceChild=function(t,e,r){t.replaceChild(e,r);return e};e.appendChild=function(t,e){t.appendChild(e);return e};e.insertElement=function(t,e,r){var n=document.createElement(r);t.insertBefore(n,e);return n};e.removeChild=function(t,e){t.removeChild(e);return e};e.setAttribute=function(t,e,r){if(n.attributes[e]&n.USE_PROPERTY){t[e]=r}t.setAttribute(e,r);return t};e.removeAttribute=function(t,e){if(n.attributes[e]&n.USE_PROPERTY){t[e]=false}t.removeAttribute(e);return t};e.addEventListener=function(t,e,r){t.addEventListener(e,r,false);return t};e.removeEventListener=function(t,e,r){t.removeEventListener(e,r);return t}},function(t,e){function r(){this.values=[]}r.prototype.add=function(t){this.values.push(t)};r.prototype.has=function(t){return this.values.indexOf(t)!==-1};t.exports=window.Set||r}]);